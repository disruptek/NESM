<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>Module nesm</title>
<style type="text/css" >
/*
Stylesheet for use with Docutils/rst2html.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.

Modified from Chad Skeeters' rst2html-style
https://bitbucket.org/cskeeters/rst2html-style/

Modified by Boyd Greenfield
*/
/* SCSS variables */
/* Text weights */
/* Body colors */
/* Text colors */
/* Link colors */
/* Syntax highlighting colors */
/* Pct changes */
/* Mixins */
/* Body/layout */
html {
  font-size: 100%;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%; }

/* Where we want fancier font if available */
h1, h2, h3, h4, h5, h6, p.module-desc, table.docinfo + blockquote p, table.docinfo blockquote p, h1 + blockquote p {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif !important; }

h1.title {
  font-weight: 900; }

body {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-weight: 400;
  font-size: 16px;
  line-height: 20px;
  color: #444;
  letter-spacing: 0.15px;
  background-color: rgba(252, 248, 244, 0.45); }

/* Skeleton grid */
.container {
  position: relative;
  width: 100%;
  max-width: 960px;
  margin: 0 auto;
  padding: 0 20px;
  box-sizing: border-box; }

.column,
.columns {
  width: 100%;
  float: left;
  box-sizing: border-box; }

/* For devices larger than 400px */
@media (min-width: 400px) {
  .container {
    width: 100%;
    padding: 0; } }
/* For devices larger than 650px */
@media (min-width: 650px) {
  .container {
    width: 100%; }

  .column,
  .columns {
    margin-left: 4%; }

  .column:first-child,
  .columns:first-child {
    margin-left: 0; }

  .one.column,
  .one.columns {
    width: 4.66666666667%; }

  .two.columns {
    width: 13.3333333333%; }

  .three.columns {
    width: 22%; }

  .four.columns {
    width: 30.6666666667%; }

  .five.columns {
    width: 39.3333333333%; }

  .six.columns {
    width: 48%; }

  .seven.columns {
    width: 56.6666666667%; }

  .eight.columns {
    width: 65.3333333333%; }

  .nine.columns {
    width: 74.0%; }

  .ten.columns {
    width: 82.6666666667%; }

  .eleven.columns {
    width: 91.3333333333%; }

  .twelve.columns {
    width: 100%;
    margin-left: 0; }

  .one-third.column {
    width: 30.6666666667%; }

  .two-thirds.column {
    width: 65.3333333333%; } }
/* Customer Overrides */
.footer {
  text-align: center;
  color: #969696;
  padding-top: 10%; }

p.module-desc {
  font-size: 1.1em;
  color: #666666; }

a.link-seesrc {
  color: #aec7d2;
  font-style: italic; }

a.link-seesrc:hover {
  color: #6c9aae; }

#toc-list {
  word-wrap: break-word; }

ul.simple-toc {
  list-style: none; }

ul.simple-toc a.reference-toplevel {
  font-weight: bold;
  color: #0077b3; }

ul.simple-toc-section {
  list-style-type: circle;
  color: #6c9aae; }

ul.simple-toc-section a.reference {
  color: #0077b3; }

cite {
  font-style: italic !important; }

dt > pre {
  border-color: rgba(0, 0, 0, 0.1);
  background-color: rgba(255, 255, 255, 0.3);
  margin: 15px 0px 5px; }

dd > pre {
  border-color: rgba(0, 0, 0, 0.1);
  background-color: whitesmoke;
  margin-top: 8px; }

.item > dd {
  margin-left: 10px;
  margin-bottom: 30px; }

/* Nim line-numbered tables */
.line-nums-table {
  width: 100%;
  table-layout: fixed; }

/* Nim search input */
div#searchInput {
  margin-bottom: 8px;
}
div#searchInput input#searchInput {
  width: 10em;
}
div.search-groupby {
  margin-bottom: 8px;
}

table.line-nums-table {
  border-radius: 4px;
  border: 1px solid #cccccc;
  background-color: whitesmoke;
  border-collapse: separate;
  margin-top: 15px;
  margin-bottom: 25px; }

.line-nums-table tbody {
  border: none; }

.line-nums-table td pre {
  border: none;
  background-color: transparent; }

.line-nums-table td.blob-line-nums {
  width: 28px; }

.line-nums-table td.blob-line-nums pre {
  color: #b0b0b0;
  -webkit-filter: opacity(75%);
  text-align: right;
  border-color: transparent;
  background-color: transparent;
  padding-left: 0px;
  margin-left: 0px;
  padding-right: 0px;
  margin-right: 0px; }

/* Docgen styles */
/* Links */
a {
  color: #0077b3;
  text-decoration: none; }

a:hover,
a:focus {
  color: #00334d;
  text-decoration: underline; }

a:visited {
  color: #00334d; }

a:focus {
  outline: thin dotted #2d2d2d;
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px; }

a:hover,
a:active {
  outline: 0; }

sub,
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline; }

sup {
  top: -0.5em; }

sub {
  bottom: -0.25em; }

img {
  width: auto;
  height: auto;
  max-width: 100%;
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic; }

@media print {
  * {
    color: black !important;
    text-shadow: none !important;
    background: transparent !important;
    box-shadow: none !important; }

  a,
  a:visited {
    text-decoration: underline; }

  a[href]:after {
    content: " (" attr(href) ")"; }

  abbr[title]:after {
    content: " (" attr(title) ")"; }

  .ir a:after,
  a[href^="javascript:"]:after,
  a[href^="#"]:after {
    content: ""; }

  pre,
  blockquote {
    border: 1px solid #999;
    page-break-inside: avoid; }

  thead {
    display: table-header-group; }

  tr,
  img {
    page-break-inside: avoid; }

  img {
    max-width: 100% !important; }

  @page {
    margin: 0.5cm; }

  h1 {
    page-break-before: always; }

  h1.title {
    page-break-before: avoid; }

  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3; }

  h2,
  h3 {
    page-break-after: avoid; } }
.img-rounded {
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px; }

.img-polaroid {
  padding: 4px;
  background-color: rgba(252, 248, 244, 0.75);
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }

p {
  margin: 0 0 8px; }

small {
  font-size: 85%; }

strong {
  font-weight: 600; }

em {
  font-style: italic; }

cite {
  font-style: normal; }

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-weight: 600;
  line-height: 20px;
  color: inherit;
  text-rendering: optimizelegibility; }

h1 {
  font-size: 2em;
  font-weight: 400;
  padding-bottom: .15em;
  border-bottom: 1px solid #aaaaaa;
  margin-top: 1.0em;
  line-height: 1.2em; }

h1.title {
  padding-bottom: 1em;
  border-bottom: 0px;
  font-size: 2.75em; }

h2 {
  font-size: 1.5em;
  margin-top: 1.5em; }

h3 {
  font-size: 1.3em;
  font-style: italic;
  margin-top: 0.75em; }

h4 {
  font-size: 1.3em;
  margin-top: 0.5em; }

h5 {
  font-size: 1.2em;
  margin-top: 0.25em; }

h6 {
  font-size: 1.1em; }

ul,
ol {
  padding: 0;
  margin: 0 0 0px 15px; }

ul ul,
ul ol,
ol ol,
ol ul {
  margin-bottom: 0; }

li {
  line-height: 20px; }

dl {
  margin-bottom: 20px; }

dt,
dd {
  line-height: 20px; }

dt {
  font-weight: bold; }

dd {
  margin-left: 10px;
  margin-bottom: 26px; }

hr {
  margin: 20px 0;
  border: 0;
  border-top: 1px solid #eeeeee;
  border-bottom: 1px solid #ffffff; }

abbr[title],
abbr[data-original-title] {
  cursor: help;
  border-bottom: 1px dotted #999999; }

abbr.initialism {
  font-size: 90%;
  text-transform: uppercase; }

blockquote {
  padding: 0 0 0 15px;
  margin: 0 0 20px;
  border-left: 5px solid #EFEBE0; }

table.docinfo + blockquote, table.docinfo blockquote, h1 + blockquote {
  border-left: 5px solid #c9c9c9;
}

table.docinfo + blockquote p, table.docinfo blockquote p, h1 + blockquote p {
  margin-bottom: 0;
  font-size: 15px;
  font-weight: 200;
  line-height: 1.5;
  font-style: italic; }

q:before,
q:after,
blockquote:before,
blockquote:after {
  content: ""; }

address {
  display: block;
  margin-bottom: 20px;
  font-style: normal;
  line-height: 20px; }

code,
pre {
  font-family: "Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace;
  padding: 0 3px 2px;
  font-weight: 500;
  font-size: 12px;
  color: #444444;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px; }

.pre {
  font-family: "Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace;
  font-weight: 600;
  /*color: #504da6;*/
}

code {
  padding: 2px 4px;
  color: #444444;
  white-space: nowrap;
  background-color: white;
  border: 1px solid #777777; }

pre {
  display: inline-block;
  box-sizing: border-box;
  min-width: calc(100% - 19.5px);
  padding: 9.5px;
  margin: 0.25em 10px 10px 10px;
  font-size: 15px;
  line-height: 20px;
  white-space: pre !important;
  overflow-y: hidden;
  overflow-x: visible;
  background-color: rgba(0, 0, 0, 0.01);
  border: 1px solid #cccccc;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px; }

pre.prettyprint {
  margin-bottom: 20px; }

pre code {
  padding: 0;
  color: inherit;
  white-space: pre;
  overflow-x: visible;
  background-color: transparent;
  border: 0; }

.pre-scrollable {
  max-height: 340px;
  overflow-y: scroll; }

table {
  max-width: 100%;
  background-color: transparent;
  border-collapse: collapse;
  border-spacing: 0; }

table th, table td {
  padding: 0px 8px 0px;
}

.table {
  width: 100%;
  margin-bottom: 20px; }

.table th,
.table td {
  padding: 8px;
  line-height: 20px;
  text-align: left;
  vertical-align: top;
  border-top: 1px solid #444444; }

.table th {
  font-weight: bold; }

.table thead th {
  vertical-align: bottom; }

.table caption + thead tr:first-child th,
.table caption + thead tr:first-child td,
.table colgroup + thead tr:first-child th,
.table colgroup + thead tr:first-child td,
.table thead:first-child tr:first-child th,
.table thead:first-child tr:first-child td {
  border-top: 0; }

.table tbody + tbody {
  border-top: 2px solid #444444; }

.table .table {
  background-color: rgba(252, 248, 244, 0.75); }

.table-condensed th,
.table-condensed td {
  padding: 4px 5px; }

.table-bordered {
  border: 1px solid #444444;
  border-collapse: separate;
  *border-collapse: collapse;
  border-left: 0;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px; }

.table-bordered th,
.table-bordered td {
  border-left: 1px solid #444444; }

.table-bordered caption + thead tr:first-child th,
.table-bordered caption + tbody tr:first-child th,
.table-bordered caption + tbody tr:first-child td,
.table-bordered colgroup + thead tr:first-child th,
.table-bordered colgroup + tbody tr:first-child th,
.table-bordered colgroup + tbody tr:first-child td,
.table-bordered thead:first-child tr:first-child th,
.table-bordered tbody:first-child tr:first-child th,
.table-bordered tbody:first-child tr:first-child td {
  border-top: 0; }

.table-bordered thead:first-child tr:first-child > th:first-child,
.table-bordered tbody:first-child tr:first-child > td:first-child,
.table-bordered tbody:first-child tr:first-child > th:first-child {
  -webkit-border-top-left-radius: 4px;
  border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px; }

.table-bordered thead:first-child tr:first-child > th:last-child,
.table-bordered tbody:first-child tr:first-child > td:last-child,
.table-bordered tbody:first-child tr:first-child > th:last-child {
  -webkit-border-top-right-radius: 4px;
  border-top-right-radius: 4px;
  -moz-border-radius-topright: 4px; }

.table-bordered thead:last-child tr:last-child > th:first-child,
.table-bordered tbody:last-child tr:last-child > td:first-child,
.table-bordered tbody:last-child tr:last-child > th:first-child,
.table-bordered tfoot:last-child tr:last-child > td:first-child,
.table-bordered tfoot:last-child tr:last-child > th:first-child {
  -webkit-border-bottom-left-radius: 4px;
  border-bottom-left-radius: 4px;
  -moz-border-radius-bottomleft: 4px; }

.table-bordered thead:last-child tr:last-child > th:last-child,
.table-bordered tbody:last-child tr:last-child > td:last-child,
.table-bordered tbody:last-child tr:last-child > th:last-child,
.table-bordered tfoot:last-child tr:last-child > td:last-child,
.table-bordered tfoot:last-child tr:last-child > th:last-child {
  -webkit-border-bottom-right-radius: 4px;
  border-bottom-right-radius: 4px;
  -moz-border-radius-bottomright: 4px; }

.table-bordered tfoot + tbody:last-child tr:last-child td:first-child {
  -webkit-border-bottom-left-radius: 0;
  border-bottom-left-radius: 0;
  -moz-border-radius-bottomleft: 0; }

.table-bordered tfoot + tbody:last-child tr:last-child td:last-child {
  -webkit-border-bottom-right-radius: 0;
  border-bottom-right-radius: 0;
  -moz-border-radius-bottomright: 0; }

.table-bordered caption + thead tr:first-child th:first-child,
.table-bordered caption + tbody tr:first-child td:first-child,
.table-bordered colgroup + thead tr:first-child th:first-child,
.table-bordered colgroup + tbody tr:first-child td:first-child {
  -webkit-border-top-left-radius: 4px;
  border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px; }

.table-bordered caption + thead tr:first-child th:last-child,
.table-bordered caption + tbody tr:first-child td:last-child,
.table-bordered colgroup + thead tr:first-child th:last-child,
.table-bordered colgroup + tbody tr:first-child td:last-child {
  -webkit-border-top-right-radius: 4px;
  border-top-right-radius: 4px;
  -moz-border-radius-topright: 4px; }

table.docutils th {
  background-color: #e8e8e8; }

table.docutils tr:hover {
  background-color: whitesmoke; }

.table-striped tbody > tr:nth-child(odd) > td,
.table-striped tbody > tr:nth-child(odd) > th {
  background-color: rgba(252, 248, 244, 0.75); }

.table-hover tbody tr:hover > td,
.table-hover tbody tr:hover > th {
  background-color: rgba(241, 222, 204, 0.75); }

table td[class*="span"],
table th[class*="span"],
.row-fluid table td[class*="span"],
.row-fluid table th[class*="span"] {
  display: table-cell;
  float: none;
  margin-left: 0; }

.hero-unit {
  padding: 60px;
  margin-bottom: 30px;
  font-size: 18px;
  font-weight: 200;
  line-height: 30px;
  color: inherit;
  background-color: rgba(230, 197, 164, 0.75);
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px; }

.hero-unit h1 {
  margin-bottom: 0;
  font-size: 60px;
  line-height: 1;
  letter-spacing: -1px;
  color: inherit; }

.hero-unit li {
  line-height: 30px; }

/* rst2html default used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0; }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 !important; }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 !important; }

.last, .with-subtitle {
  margin-bottom: 0 !important; }

.hidden {
  display: none; }

a.toc-backref {
  text-decoration: none;
  color: #444444; }

blockquote.epigraph {
  margin: 2em 5em; }

dl.docutils dd {
  margin-bottom: 0.5em; }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden; }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/
div.abstract {
  margin: 2em 5em; }

div.abstract p.topic-title {
  font-weight: bold;
  text-align: center; }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em;
  border: medium outset;
  padding: 1em; }

div.note, div.warning {
  margin: 1.5em 0px;
  border: none; }

div.note p.admonition-title,
div.warning p.admonition-title {
  display: none; }

/* Clearfix
 * http://css-tricks.com/snippets/css/clear-fix/
 */
div.note:after,
div.warning:after {
  content: "";
  display: table;
  clear: both; }

div.note p:before,
div.warning p:before {
  display: block;
  float: left;
  font-size: 4em;
  line-height: 1em;
  margin-right: 20px;
  margin-left: 0em;
  margin-top: -10px;
  content: '\0270D';
  /*handwriting*/ }

div.warning p:before {
  content: '\026A0';
  /*warning*/ }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold;
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif; }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: #b30000;
  font-weight: bold;
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif; }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic; }

div.dedication p.topic-title {
  font-weight: bold;
  font-style: normal; }

div.figure {
  margin-left: 2em;
  margin-right: 2em; }

div.footer, div.header {
  clear: both;
  font-size: smaller; }

div.line-block {
  display: block;
  margin-top: 1em;
  margin-bottom: 1em; }

div.line-block div.line-block {
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 1.5em; }

div.sidebar {
  margin: 0 0 0.5em 1em;
  border: medium outset;
  padding: 1em;
  background-color: rgba(252, 248, 244, 0.75);
  width: 40%;
  float: right;
  clear: right; }

div.sidebar p.rubric {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-size: medium; }

div.system-messages {
  margin: 5em; }

div.system-messages h1 {
  color: #b30000; }

div.system-message {
  border: medium outset;
  padding: 1em; }

div.system-message p.system-message-title {
  color: #b30000;
  font-weight: bold; }

div.topic {
  margin: 2em; }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em; }

h1.title {
  text-align: center; }

h2.subtitle {
  text-align: center; }

hr.docutils {
  width: 75%; }

img.align-left, .figure.align-left, object.align-left {
  clear: left;
  float: left;
  margin-right: 1em; }

img.align-right, .figure.align-right, object.align-right {
  clear: right;
  float: right;
  margin-left: 1em; }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto; }

.align-left {
  text-align: left; }

.align-center {
  clear: both;
  text-align: center; }

.align-right {
  text-align: right; }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit; }

/* div.align-center * { */
/*   text-align: left } */

ul.simple > li {
  margin-bottom: 0.5em }

ol.simple, ul.simple {
  margin-bottom: 1em; }

ol.arabic {
  list-style: decimal; }

ol.loweralpha {
  list-style: lower-alpha; }

ol.upperalpha {
  list-style: upper-alpha; }

ol.lowerroman {
  list-style: lower-roman; }

ol.upperroman {
  list-style: upper-roman; }

p.attribution {
  text-align: right;
  margin-left: 50%; }

p.caption {
  font-style: italic; }

p.credits {
  font-style: italic;
  font-size: smaller; }

p.label {
  white-space: nowrap; }

p.rubric {
  font-weight: bold;
  font-size: larger;
  color: maroon;
  text-align: center; }

p.sidebar-title {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-weight: bold;
  font-size: larger; }

p.sidebar-subtitle {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-weight: bold; }

p.topic-title {
  font-weight: bold; }

pre.address {
  margin-bottom: 0;
  margin-top: 0;
  font: inherit; }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em;
  margin-right: 2em; }

pre.code .ln {
  color: grey; }

/* line numbers */
pre.code, code {
  background-color: #eeeeee; }

pre.code .comment, code .comment {
  color: #5c6576; }

pre.code .keyword, code .keyword {
  color: #3B0D06;
  font-weight: bold; }

pre.code .literal.string, code .literal.string {
  color: #0c5404; }

pre.code .name.builtin, code .name.builtin {
  color: #352b84; }

pre.code .deleted, code .deleted {
  background-color: #DEB0A1; }

pre.code .inserted, code .inserted {
  background-color: #A3D289; }

span.classifier {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-style: oblique; }

span.classifier-delimiter {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-weight: bold; }

span.interpreted {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif; }

span.option {
  white-space: nowrap; }

span.pre {
  white-space: pre; }

span.problematic {
  color: #b30000; }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80%; }

table.citation {
  border-left: solid 1px #666666;
  margin-left: 1px; }

table.docinfo {
  margin: 0em;
  margin-top: 2em;
  margin-bottom: 2em;
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif !important;
  color: #444444; }

table.docutils {
  margin-top: 0.5em;
  margin-bottom: 0.5em; }

table.footnote {
  border-left: solid 1px #2d2d2d;
  margin-left: 1px; }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em;
  padding-right: 0.5em;
  vertical-align: top; }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: 700;
  text-align: left;
  white-space: nowrap;
  padding-left: 0; }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100%; }

ul.auto-toc {
  list-style-type: none; }

span.DecNumber {
  color: #252dbe; }

span.BinNumber {
  color: #252dbe; }

span.HexNumber {
  color: #252dbe; }

span.OctNumber {
  color: #252dbe; }

span.FloatNumber {
  color: #252dbe; }

span.Identifier {
  color: #3b3b3b; }

span.Keyword {
  font-weight: 600;
  color: #5e8f60; }

span.StringLit {
  color: #a4255b; }

span.LongStringLit {
  color: #a4255b; }

span.CharLit {
  color: #a4255b; }

span.EscapeSequence {
  color: black; }

span.Operator {
  color: black; }

span.Punctuation {
  color: black; }

span.Comment, span.LongComment {
  font-style: italic;
  font-weight: 400;
  color: #484a86; }

span.RegularExpression {
  color: darkviolet; }

span.TagStart {
  color: darkviolet; }

span.TagEnd {
  color: darkviolet; }

span.Key {
  color: #252dbe; }

span.Value {
  color: #252dbe; }

span.RawData {
  color: #a4255b; }

span.Assembler {
  color: #252dbe; }

span.Preprocessor {
  color: #252dbe; }

span.Directive {
  color: #252dbe; }

span.Command, span.Rule, span.Hyperlink, span.Label, span.Reference,
span.Other {
  color: black; }

/* Pop type, const, proc, and iterator defs in nim def blocks */
dt pre > span.Identifier, dt pre > span.Operator {
  color: #155da4;
  font-weight: 700; }

dt pre > span.Identifier ~ span.Identifier, dt pre > span.Operator ~ span.Identifier {
  color: inherit;
  font-weight: inherit; }

dt pre > span.Operator ~ span.Identifier, dt pre > span.Operator ~ span.Operator {
  color: inherit;
  font-weight: inherit; }

/* Nim sprite for the footer (taken from main page favicon) */
.nim-sprite {
  display: inline-block;
  height: 12px;
  width: 12px;
  background-position: 0 0;
  background-size: 12px 12px;
  -webkit-filter: opacity(50%);
  background-repeat: no-repeat;
  background-image: url("data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA==");
  margin-bottom: -5px; }
div.pragma {
  display: none;
}
span.pragmabegin {
  cursor: pointer;
}
span.pragmaend {
  cursor: pointer;
}

div.search_results {
  background-color: antiquewhite;
  margin: 3em;
  padding: 1em;
  border: 1px solid #4d4d4d;
}

div#global-links ul {
  margin-left: 0;
  list-style-type: none;
}
</style>

<script type="text/javascript" src="../dochack.js"></script>

<script type="text/javascript">
function togglepragma(d) {
  if (d.style.display != 'inline')
    d.style.display = 'inline';
  else
    d.style.display = 'none';
}

function main() {
  var elements = document.getElementsByClassName("pragmabegin");
  for (var i = 0; i < elements.length; ++i) {
    var e = elements[i];
    e.onclick = function(event) {
      togglepragma(event.target.nextSibling);
    };
  }
  var elements = document.getElementsByClassName("pragmaend");
  for (var i = 0; i < elements.length; ++i) {
    var e = elements[i];
    e.onclick = function(event) {
      togglepragma(event.target.previousSibling);
    };
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">Module nesm</h1>
    <div class="row">
  <div class="three columns">
  <div id="global-links">
    <ul class="simple">
    </ul>
  </div>
  <div id="searchInput">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="static-types_toc" href="#static-types">Static types</a></li>
<li><a class="reference" id="serialization-options_toc" href="#serialization-options">Serialization options</a></li>
<li><a class="reference" id="endianness-switching_toc" href="#endianness-switching">Endianness switching</a></li>
<li><a class="reference" id="converting-existent-types-to-serializable_toc" href="#converting-existent-types-to-serializable">Converting existent types to serializable</a></li>
<li><a class="reference" id="customizing-seq-and-string-serialization-schemas_toc" href="#customizing-seq-and-string-serialization-schemas">Customizing seq and string serialization schemas</a></li>
<li><a class="reference" id="usage-of-int-float-uint-types-without-size-specifier_toc" href="#usage-of-int-float-uint-types-without-size-specifier">Usage of int, float, uint types without size specifier</a></li>
<li><a class="reference" id="enum-correctness-checking_toc" href="#enum-correctness-checking">Enum correctness checking</a></li>
<li><a class="reference" id="future-ideas_toc" href="#future-ideas">Future ideas</a></li>
<li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
  <ul class="simple simple-toc-section">
    
  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#TheType"
    title="TheType = object"><wbr />The<wbr />Type<span class="attachedType" style="visibility:hidden"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#size,typedesc[TheType]"
    title="size(thetype: typedesc[TheType]): int"><wbr />size<span class="attachedType" style="visibility:hidden">TheType</span></a></li>
  <li><a class="reference" href="#size,TheType"
    title="size(thetype: TheType): int"><wbr />size<span class="attachedType" style="visibility:hidden">TheType</span></a></li>
  <li><a class="reference" href="#serialize,TheType,Stream"
    title="serialize(obj: TheType; stream: Stream)"><wbr />serialize<span class="attachedType" style="visibility:hidden">TheType</span></a></li>
  <li><a class="reference" href="#serialize,TheType"
    title="serialize(obj: TheType): string"><wbr />serialize<span class="attachedType" style="visibility:hidden">TheType</span></a></li>
  <li><a class="reference" href="#deserialize,typedesc[TheType],Stream"
    title="deserialize(thetype: typedesc[TheType]; stream: Stream): TheType"><wbr />deserialize<span class="attachedType" style="visibility:hidden">TheType</span></a></li>
  <li><a class="reference" href="#deserialize,typedesc[TheType],"
    title="deserialize(thetype: typedesc[TheType];
            data: string | seq[byte | char | int8 | uint8]): TheType"><wbr />deserialize<span class="attachedType" style="visibility:hidden">TheType</span></a></li>
  <li><a class="reference" href="#serialize,T,Stream"
    title="serialize[T](obj: T; thestream: Stream)"><wbr />serialize<span class="attachedType" style="visibility:hidden"></span></a></li>
  <li><a class="reference" href="#deserialize,Stream"
    title="deserialize[T](thestream: Stream): T"><wbr />deserialize<span class="attachedType" style="visibility:hidden"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#17" id="67">Macros</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#toSerializable.m,typed,varargs[untyped]"
    title="toSerializable(typedecl: typed; settings: varargs[untyped]): untyped"><wbr />to<wbr />Serializable<span class="attachedType" style="visibility:hidden"></span></a></li>
  <li><a class="reference" href="#serializable.m,untyped"
    title="serializable(typedecl: untyped): untyped"><wbr />serializable<span class="attachedType" style="visibility:hidden"></span></a></li>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  <p class="module-desc"><p><strong>NESM</strong> is a tool that generates serialization and deserialization code for a given object. This library provides a macro called <cite>serializable</cite> inside which the object description should be placed.</p>
<p>For example:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">Ball</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">weight</span><span class="Punctuation">:</span> <span class="Identifier">float32</span>
    <span class="Identifier">diameter</span><span class="Punctuation">:</span> <span class="Identifier">int32</span>
    <span class="Identifier">isHollow</span><span class="Punctuation">:</span> <span class="Identifier">bool</span></pre><p>In this example you could notice that <cite>int32</cite> and <cite>float32</cite> declarations are used instead of just <cite>int</cite> and <cite>float</cite>. It is necessary to avoid an ambiguity in declarations on different platforms.</p>
<p>The code in example will be transformed into the following code (the resulting code can be seen when <strong>-d:debug</strong> is passed to Nim compiler):</p>
<pre class="listing"><span class="Keyword">type</span>
  <span class="Identifier">Ball</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">weight</span><span class="Punctuation">:</span> <span class="Identifier">float32</span>
    <span class="Identifier">diameter</span><span class="Punctuation">:</span> <span class="Identifier">int32</span>
    <span class="Identifier">isHollow</span><span class="Punctuation">:</span> <span class="Identifier">bool</span>

<span class="Keyword">proc</span> <span class="Identifier">size</span><span class="Punctuation">(</span><span class="Identifier">obj</span><span class="Punctuation">:</span> <span class="Identifier">Ball</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">int</span> <span class="Operator">=</span>
  <span class="Identifier">result</span> <span class="Operator">+=</span> <span class="DecNumber">4</span>
  <span class="Identifier">result</span> <span class="Operator">+=</span> <span class="DecNumber">4</span>
  <span class="Identifier">result</span> <span class="Operator">+=</span> <span class="DecNumber">1</span>
  <span class="Identifier">result</span> <span class="Operator">+=</span> <span class="DecNumber">0</span>

<span class="Keyword">proc</span> <span class="Identifier">serialize</span><span class="Punctuation">(</span><span class="Identifier">obj</span><span class="Punctuation">:</span> <span class="Identifier">Ball</span><span class="Punctuation">;</span> <span class="Identifier">thestream</span><span class="Punctuation">:</span> <span class="Identifier">Stream</span><span class="Punctuation">)</span> <span class="Operator">=</span>
   <span class="Keyword">discard</span>
   <span class="Identifier">thestream</span><span class="Operator">.</span><span class="Identifier">writeData</span><span class="Punctuation">(</span><span class="Identifier">obj</span><span class="Operator">.</span><span class="Identifier">weight</span><span class="Operator">.</span><span class="Identifier">unsafeAddr</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">)</span>
   <span class="Identifier">thestream</span><span class="Operator">.</span><span class="Identifier">writeData</span><span class="Punctuation">(</span><span class="Identifier">obj</span><span class="Operator">.</span><span class="Identifier">diameter</span><span class="Operator">.</span><span class="Identifier">unsafeAddr</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">)</span>
   <span class="Identifier">thestream</span><span class="Operator">.</span><span class="Identifier">writeData</span><span class="Punctuation">(</span><span class="Identifier">obj</span><span class="Operator">.</span><span class="Identifier">isHollow</span><span class="Operator">.</span><span class="Identifier">unsafeAddr</span><span class="Punctuation">,</span> <span class="DecNumber">1</span><span class="Punctuation">)</span>
 
 <span class="Keyword">proc</span> <span class="Identifier">serialize</span><span class="Punctuation">(</span><span class="Identifier">obj</span><span class="Punctuation">:</span> <span class="Identifier">Ball</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">string</span> <span class="Operator">=</span>
   <span class="Keyword">let</span> <span class="Identifier">ss142002</span> <span class="Operator">=</span> <span class="Identifier">newStringStream</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
   <span class="Identifier">serialize</span><span class="Punctuation">(</span><span class="Identifier">obj</span><span class="Punctuation">,</span> <span class="Identifier">ss142002</span><span class="Punctuation">)</span>
   <span class="Identifier">ss142002</span><span class="Operator">.</span><span class="Identifier">data</span>
 
 <span class="Keyword">proc</span> <span class="Identifier">deserialize</span><span class="Punctuation">(</span><span class="Identifier">thetype142004</span><span class="Punctuation">:</span> <span class="Identifier">typedesc</span><span class="Punctuation">[</span><span class="Identifier">Ball</span><span class="Punctuation">]</span><span class="Punctuation">;</span> <span class="Identifier">thestream</span><span class="Punctuation">:</span> <span class="Identifier">Stream</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">Ball</span> <span class="Operator">=</span>
   <span class="Keyword">discard</span>
   <span class="Identifier">assert</span><span class="Punctuation">(</span><span class="DecNumber">4</span> <span class="Operator">==</span>
       <span class="Identifier">thestream</span><span class="Operator">.</span><span class="Identifier">readData</span><span class="Punctuation">(</span><span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">weight</span><span class="Operator">.</span><span class="Identifier">unsafeAddr</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">)</span><span class="Punctuation">,</span>
          <span class="StringLit">&quot;Stream was not provided enough data&quot;</span><span class="Punctuation">)</span>
   <span class="Identifier">assert</span><span class="Punctuation">(</span><span class="DecNumber">4</span> <span class="Operator">==</span>
       <span class="Identifier">thestream</span><span class="Operator">.</span><span class="Identifier">readData</span><span class="Punctuation">(</span><span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">diameter</span><span class="Operator">.</span><span class="Identifier">unsafeAddr</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">)</span><span class="Punctuation">,</span>
          <span class="StringLit">&quot;Stream was not provided enough data&quot;</span><span class="Punctuation">)</span>
   <span class="Identifier">assert</span><span class="Punctuation">(</span><span class="DecNumber">1</span> <span class="Operator">==</span>
       <span class="Identifier">thestream</span><span class="Operator">.</span><span class="Identifier">readData</span><span class="Punctuation">(</span><span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">isHollow</span><span class="Operator">.</span><span class="Identifier">unsafeAddr</span><span class="Punctuation">,</span> <span class="DecNumber">1</span><span class="Punctuation">)</span><span class="Punctuation">,</span>
          <span class="StringLit">&quot;Stream was not provided enough data&quot;</span><span class="Punctuation">)</span></pre><p>As you may see from the code above, the macro generates three kinds of procedures: serializer, deserializer and size estimator. The serialization is being performed in a following way: each memory region of variable is copied to the resulting stream back-to-back. This approach achieves both of smallest serialized object size and independence from the compilator specific object representation.</p>
<p>At the moment the following types of object are supported:</p>
<ul class="simple"><li><dl class="docutils"><dt>Aliases from basic types or previously defined in this block:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">MyInt</span> <span class="Operator">=</span> <span class="Identifier">int16</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Distinct types from basic types or previously defined in this block:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">MyInt</span> <span class="Operator">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int16</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Tuples, objects and arrays:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">MyTuple</span> <span class="Operator">=</span> <span class="Keyword">tuple</span><span class="Punctuation">[</span><span class="Identifier">a</span><span class="Punctuation">:</span> <span class="Identifier">float64</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="Identifier">int64</span><span class="Punctuation">]</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Nested objects defined in <em>serializable</em> block:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">MyNestedObject</span> <span class="Operator">=</span> <span class="Keyword">object</span>
  <span class="Identifier">a</span><span class="Punctuation">:</span> <span class="Identifier">float64</span>
  <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="Identifier">int64</span>
<span class="Keyword">type</span> <span class="Identifier">MyObject</span> <span class="Operator">=</span> <span class="Keyword">object</span>
  <span class="Identifier">a</span><span class="Punctuation">:</span> <span class="Identifier">float32</span>
  <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="Identifier">MyNestedObject</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Nested arrays and tuples:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">Matrix</span> <span class="Operator">=</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="FloatNumber">0.</span><span class="Operator">.</span><span class="DecNumber">4</span><span class="Punctuation">,</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="FloatNumber">0.</span><span class="Operator">.</span><span class="DecNumber">4</span><span class="Punctuation">,</span> <span class="Identifier">int32</span><span class="Punctuation">]</span><span class="Punctuation">]</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Sequencies and strings:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">MySeq</span> <span class="Operator">=</span> <span class="Keyword">object</span>
  <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Null terminated strings (3-byte smaller but slower than strings):</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">NTString</span> <span class="Operator">=</span> <span class="Identifier">cstring</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Object variants with nested case statements:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">Variant</span> <span class="Operator">=</span> <span class="Keyword">object</span>
  <span class="Keyword">case</span> <span class="Identifier">has_sign</span><span class="Punctuation">:</span> <span class="Identifier">bool</span>
  <span class="Keyword">of</span> <span class="Identifier">true</span><span class="Punctuation">:</span>
    <span class="Identifier">a</span><span class="Punctuation">:</span> <span class="Identifier">int32</span>
  <span class="Keyword">else</span><span class="Punctuation">:</span>
    <span class="Keyword">case</span> <span class="Identifier">bits</span><span class="Punctuation">:</span> <span class="Identifier">uint8</span>
    <span class="Keyword">of</span> <span class="DecNumber">32</span><span class="Punctuation">:</span>
      <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span>
    <span class="Keyword">of</span> <span class="DecNumber">16</span><span class="Punctuation">:</span>
      <span class="Identifier">c</span><span class="Punctuation">:</span> <span class="Identifier">uint16</span>
    <span class="Keyword">else</span><span class="Punctuation">:</span>
      <span class="Identifier">d</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">uint8</span><span class="Punctuation">]</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Enumerates:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">Enumerate</span> <span class="Operator">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">A</span>
  <span class="Identifier">B</span> <span class="Operator">=</span> <span class="StringLit">&quot;It's B&quot;</span>
  <span class="Identifier">C</span> <span class="Operator">=</span> <span class="Punctuation">(</span><span class="DecNumber">233</span><span class="Punctuation">,</span> <span class="StringLit">&quot;C is here&quot;</span><span class="Punctuation">)</span>
  <span class="Identifier">D</span> <span class="Operator">=</span> <span class="DecNumber">455</span></pre></dd>
</dl>
</li>
</ul>
<ul class="simple"><li><dl class="docutils"><dt>Sets:</dt>
<dd><pre class="listing"><span class="Keyword">type</span> <span class="Identifier">CharSet</span> <span class="Operator">=</span> <span class="Identifier">set</span><span class="Punctuation">[</span><span class="Identifier">char</span><span class="Punctuation">]</span></pre></dd>
</dl>
</li>
</ul>

<h1><a class="toc-backref" id="static-types" href="#static-types">Static types</a></h1><p>There is also a special keyword exists for structures which size is known at compile time. The type declarations placed under the <cite>static</cite> section inside the <cite>serializable</cite> section will get three key differences from the regular declarations:</p>
<ul class="simple"><li>the <cite>size</cite> procedure will be receiving typedesc parameter instead of instance of the object and can be used at compile time</li>
<li>a new <cite>deserialize</cite> procedure will be generated that receives a data containers (like a seq[byte] or a string) in addition to receiver closure procedure.</li>
<li>any dynamic structures like sequencies or strings will lead to compile time errors (because their size can not be estimated at compile time)</li>
</ul>
<p>The example above with <cite>static</cite> section will be look like:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">static</span> <span class="Punctuation">:</span>
      <span class="Keyword">type</span>
        <span class="Identifier">Ball</span> <span class="Operator">=</span> <span class="Keyword">object</span>
          <span class="Identifier">weight</span><span class="Punctuation">:</span> <span class="Identifier">float32</span>
          <span class="Identifier">diameter</span><span class="Punctuation">:</span> <span class="Identifier">int32</span>
          <span class="Identifier">isHollow</span><span class="Punctuation">:</span> <span class="Identifier">bool</span></pre><p>And the differeces will occur in following procedures:</p>
<pre class="listing"><span class="Keyword">proc</span> <span class="Identifier">size</span><span class="Punctuation">(</span><span class="Identifier">thetype</span><span class="Punctuation">:</span> <span class="Identifier">typedesc</span><span class="Punctuation">[</span><span class="Identifier">Ball</span><span class="Punctuation">]</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">int</span> <span class="Operator">=</span>
  <span class="Punctuation">(</span><span class="DecNumber">0</span> <span class="Operator">+</span> <span class="DecNumber">4</span> <span class="Operator">+</span> <span class="DecNumber">4</span> <span class="Operator">+</span> <span class="DecNumber">1</span><span class="Punctuation">)</span>

<span class="Keyword">proc</span> <span class="Identifier">deserialize</span><span class="Punctuation">(</span><span class="Identifier">thetype</span><span class="Punctuation">:</span> <span class="Identifier">typedesc</span><span class="Punctuation">[</span><span class="Identifier">Ball</span><span class="Punctuation">]</span><span class="Punctuation">;</span>
                <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">byte</span> <span class="Operator">|</span> <span class="Identifier">char</span> <span class="Operator">|</span> <span class="Identifier">int8</span> <span class="Operator">|</span> <span class="Identifier">uint8</span><span class="Punctuation">]</span> <span class="Operator">|</span> <span class="Identifier">string</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">Ball</span> <span class="Operator">=</span>
  <span class="Identifier">assert</span><span class="Punctuation">(</span><span class="Identifier">data</span><span class="Operator">.</span><span class="Identifier">len</span> <span class="Operator">&gt;=</span> <span class="Keyword">type</span><span class="Punctuation">(</span><span class="Identifier">result</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">size</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="StringLit">&quot;Given sequence should contain at least &quot;</span> <span class="Operator">&amp;</span>
      <span class="Operator">$</span> <span class="Punctuation">(</span><span class="Keyword">type</span><span class="Punctuation">(</span><span class="Identifier">result</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">size</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">)</span> <span class="Operator">&amp;</span> <span class="StringLit">&quot; bytes!&quot;</span><span class="Punctuation">)</span>
  <span class="Keyword">let</span> <span class="Identifier">ss142004</span> <span class="Operator">=</span> <span class="Identifier">newStringStream</span><span class="Punctuation">(</span><span class="Keyword">cast</span><span class="Punctuation">[</span><span class="Identifier">string</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">data</span><span class="Punctuation">)</span><span class="Punctuation">)</span>
  <span class="Identifier">deserialize</span><span class="Punctuation">(</span><span class="Keyword">type</span><span class="Punctuation">(</span><span class="Identifier">result</span><span class="Punctuation">)</span><span class="Punctuation">,</span> <span class="Identifier">ss142004</span><span class="Punctuation">)</span></pre>
<h1><a class="toc-backref" id="serialization-options" href="#serialization-options">Serialization options</a></h1><p>The serialization process can be controlled via the special syntax <strong>{&lt;key&gt;: &lt;value&gt;, &lt;key&gt;: &lt;value&gt;,...}</strong>. There are three ways of using this syntax:</p>
<ul class="simple"><li>From invocation to the end of object or another invocation<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">MyType</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">set</span><span class="Punctuation">:</span> <span class="Punctuation">{</span><span class="Operator">&lt;</span><span class="Identifier">options</span><span class="Operator">&gt;</span><span class="Punctuation">}</span>
    <span class="Operator">...</span> <span class="Comment"># all fields until the end of object will be affected</span>
    <span class="Operator">...</span> <span class="Comment"># another set: {&lt;options&gt;} can override previous one</span></pre></li>
</ul>
<ul class="simple"><li>For converted structure<pre class="listing"><span class="Identifier">toSerializable</span><span class="Punctuation">(</span><span class="Identifier">TheType</span><span class="Punctuation">,</span> <span class="Operator">&lt;</span><span class="Identifier">options</span><span class="Operator">&gt;</span><span class="Punctuation">)</span>
<span class="Comment"># NOTE: curly braces are not required here</span></pre></li>
</ul>
<ul class="simple"><li>For particular field (inline)<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">MyType</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">typical_field</span><span class="Punctuation">:</span> <span class="Identifier">string</span>
    <span class="Identifier">field_with_special_rules</span><span class="Punctuation">:</span> <span class="Identifier">int32</span> <span class="Keyword">as</span> <span class="Punctuation">{</span><span class="Operator">&lt;</span><span class="Identifier">options</span><span class="Operator">&gt;</span><span class="Punctuation">}</span> <span class="Comment"># inline options</span>
    <span class="Comment"># NOTE: inline options have highest priority</span>
    <span class="Identifier">another_typical_field</span><span class="Punctuation">:</span> <span class="Identifier">float32</span></pre></li>
</ul>
<p>The serialization options themself are described in the paragraphs they are related.</p>

<h1><a class="toc-backref" id="endianness-switching" href="#endianness-switching">Endianness switching</a></h1><p>There is a way exists to set which endian should be used while [de]serialization particular structure or part of the structure. A special keyword <strong>endian</strong> in serialization options allows to set the endian. E.g.:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">Ball</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">weight</span><span class="Punctuation">:</span> <span class="Identifier">float32</span>        <span class="Comment"># This value will be serialized in *cpuEndian* endian</span>
    <span class="Identifier">set</span><span class="Punctuation">:</span> <span class="Punctuation">{</span><span class="Identifier">endian</span><span class="Punctuation">:</span> <span class="Identifier">bigEndian</span><span class="Punctuation">}</span>
    <span class="Identifier">diameter</span><span class="Punctuation">:</span> <span class="Identifier">int32</span>        <span class="Comment"># This value will be serialized in big endian regardless of *cpuEndian*</span>
    <span class="Identifier">set</span><span class="Punctuation">:</span> <span class="Punctuation">{</span><span class="Identifier">endian</span><span class="Punctuation">:</span> <span class="Identifier">littleEndian</span><span class="Punctuation">}</span>     <span class="Comment"># Only &quot;bigEndian&quot; and &quot;littleEndian&quot; values allowed</span>
    <span class="Identifier">color</span><span class="Punctuation">:</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="DecNumber">3</span><span class="Punctuation">,</span> <span class="Identifier">int16</span><span class="Punctuation">]</span> <span class="Comment"># Values in this array will be serialized in little endian</span></pre><p>The generated code will use the <strong>swapEndian{16|32|64}()</strong> calls from the endians module to change endianness.</p>

<h1><a class="toc-backref" id="converting-existent-types-to-serializable" href="#converting-existent-types-to-serializable">Converting existent types to serializable</a></h1><p>In case when the type to be serialized cannot be rewriten under the <em>serializable</em> macro, there is <strong>toSerializable</strong> macro exist. The type description given to this macro produces exactly the same effect as the type declaration placed under the <em>serializable</em> macro. Do not forget to make fields of the type visible for serialization procedures generated by using asteriks notation or by including (not importing) module with type declaration. E.g.:</p>
<pre class="listing"><span class="Keyword">from</span> <span class="Identifier">basic2d</span> <span class="Keyword">import</span> <span class="Identifier">Point2d</span>
<span class="Comment"># Point2d already have all the fields visible, so including not required</span>
<span class="Identifier">toSerializable</span><span class="Punctuation">(</span><span class="Identifier">Point2d</span><span class="Punctuation">)</span> <span class="Comment"># Generation of serialization procedures</span>
<span class="Operator">...</span>
<span class="Keyword">include</span> <span class="Identifier">oids</span> <span class="Comment"># Oid's fields are visible only inside the module, so including is necessary</span>
<span class="Identifier">toSerializable</span><span class="Punctuation">(</span><span class="Identifier">Oid</span><span class="Punctuation">)</span>
<span class="Operator">...</span>
<span class="Identifier">toSerializable</span><span class="Punctuation">(</span><span class="Identifier">Point2d</span><span class="Punctuation">,</span> <span class="Identifier">dynamic</span><span class="Punctuation">:</span> <span class="Identifier">false</span><span class="Punctuation">)</span> <span class="Comment"># The &quot;dynamic: false&quot; option</span>
                                        <span class="Comment"># is equal to &quot;static:&quot; for</span>
                                        <span class="Comment"># serializable macro</span></pre>
<h1><a class="toc-backref" id="customizing-seq-and-string-serialization-schemas" href="#customizing-seq-and-string-serialization-schemas">Customizing seq and string serialization schemas</a></h1><p>By default, NESM serializes seq's and string's in a following way:</p>
<ol class="simple"><li>Serialize the seq or string length as uint32</li>
<li>Serialize the seq or string content as an array[length, type]</li>
</ol>
<p>In other words seq and string types can be described in following pseudo-code:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">length</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span>
    <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="Identifier">length</span><span class="Punctuation">,</span> <span class="Identifier">T</span><span class="Punctuation">]</span>
  <span class="Keyword">type</span> <span class="Identifier">string</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">length</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span>
    <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="Identifier">length</span><span class="Punctuation">,</span> <span class="Identifier">char</span><span class="Punctuation">]</span></pre><p>In some cases this scheme is being not flexible enough, say there is a structure:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">Matrix</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">lines</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span>
    <span class="Identifier">columns</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span>
    <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="Identifier">lines</span><span class="Punctuation">,</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="Identifier">columns</span><span class="Punctuation">,</span> <span class="Identifier">int32</span><span class="Punctuation">]</span><span class="Punctuation">]</span></pre><p>This type is impossible in Nim due to static nature of array type. But how else the seq size may be controlled outside the common scheme? For this case the <strong>size</strong> keyword exists in serializable options:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">Matrix</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">lines</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span> <span class="Comment"># the size specifier should be placed before it's usage in the 'size' option</span>
    <span class="Identifier">columns</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span>
    <span class="Identifier">data</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">int32</span><span class="Punctuation">]</span><span class="Punctuation">]</span> <span class="Keyword">as</span> <span class="Punctuation">{</span><span class="Identifier">size</span><span class="Punctuation">:</span> <span class="Punctuation">{</span><span class="Punctuation">}</span><span class="Operator">.</span><span class="Identifier">lines</span><span class="Punctuation">,</span> <span class="Identifier">size</span><span class="Punctuation">:</span> <span class="Punctuation">{</span><span class="Punctuation">}</span><span class="Operator">.</span><span class="Identifier">columns</span><span class="Punctuation">}</span>
    <span class="Comment"># The seq's will be stored like array's but their sizes will be</span>
    <span class="Comment"># taken from 'lines' and 'columns' fields during deserialization</span></pre><p>Note that first 'size' option controls only outer seq, but the second one is related to inner seq. Honestly, any valid expression can be used as argument for the 'size' option. Empty curly braces mean an object itself at the level of invocation. Special case is a double, triple, etc empty curly braces. Take a look at the example:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">SpecialType</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">length</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span> <span class="Comment"># &lt;- this field will be used as length of subtype.a</span>
    <span class="Identifier">subtype</span><span class="Punctuation">:</span> <span class="Keyword">tuple</span><span class="Punctuation">[</span><span class="Identifier">length</span><span class="Punctuation">:</span> <span class="Identifier">string</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">int32</span><span class="Punctuation">]</span> <span class="Keyword">as</span> <span class="Punctuation">{</span><span class="Identifier">size</span><span class="Punctuation">:</span> <span class="Punctuation">{</span><span class="Punctuation">{</span><span class="Punctuation">}</span><span class="Punctuation">}</span><span class="Operator">.</span><span class="Identifier">length</span><span class="Punctuation">}</span><span class="Punctuation">]</span></pre><p>The 'size' options invocation located inside the subtype field, and the only way to use field 'length' from the outer type without affecting inner string 'subtype.length' is the double curly braces notation.</p>
<p>In oposite to <cite>size</cite> option there is <cite>sizeof</cite> option with can be used to set particular fields value to length of other periodic value instead of actual one during serialization. The previous example can be rewriten in following way to utilize the <cite>sizeof</cite> option:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">SpecialType</span> <span class="Operator">=</span> <span class="Keyword">object</span>
    <span class="Identifier">length</span><span class="Punctuation">:</span> <span class="Identifier">uint32</span> <span class="Keyword">as</span> <span class="Punctuation">{</span><span class="Identifier">sizeof</span><span class="Punctuation">:</span> <span class="Punctuation">{</span><span class="Punctuation">}</span><span class="Operator">.</span><span class="Identifier">subtype</span><span class="Operator">.</span><span class="Identifier">a</span><span class="Punctuation">}</span>
    <span class="Identifier">subtype</span><span class="Punctuation">:</span> <span class="Keyword">tuple</span><span class="Punctuation">[</span><span class="Identifier">length</span><span class="Punctuation">:</span> <span class="Identifier">string</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">int32</span><span class="Punctuation">]</span> <span class="Keyword">as</span> <span class="Punctuation">{</span><span class="Identifier">size</span><span class="Punctuation">:</span> <span class="Punctuation">{</span><span class="Punctuation">{</span><span class="Punctuation">}</span><span class="Punctuation">}</span><span class="Operator">.</span><span class="Identifier">length</span><span class="Punctuation">}</span><span class="Punctuation">]</span></pre>
<h1><a class="toc-backref" id="usage-of-int-float-uint-types-without-size-specifier" href="#usage-of-int-float-uint-types-without-size-specifier">Usage of int, float, uint types without size specifier</a></h1><p>By default the serializable macro throws an error when the type under the macro contains basic type description without size specification. For example, the following code will cause an error:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span> <span class="Identifier">MyInt</span> <span class="Operator">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int</span></pre><p>To avoid this behaviour one can tell the macro to allow all basic type description without size specification by using <strong>-d:allow_undefined_type_size</strong> compiler switch. You must avoid to use this switch as far as possible because when the switch enabled the library can not guarantee proper deserialization of objects on devices with different architectures.</p>

<h1><a class="toc-backref" id="enum-correctness-checking" href="#enum-correctness-checking">Enum correctness checking</a></h1><p><strong>NESM</strong> is checking enum correctness after deserialization by default. If deserialized value is not one of enum ordinals then the <strong>ValueError</strong> will be raised. To disable such a behaviour user may use the <strong>-d:disableEnumChecks</strong> compiler switch.</p>

<h1><a class="toc-backref" id="future-ideas" href="#future-ideas">Future ideas</a></h1><p>The following will not necessarily be done but may be realized on demand</p>
<ul class="simple"><li>the data aligning support (useful for reading custom data, not created by this macro. can be partially done at client side via modification of writer/obtainer)</li>
<li>implement some dynamic dictonary type (not required actually because it can be easily implemented on client side)</li>
</ul>
</p>
  <div class="section" id="6">
<h1><a class="toc-backref" href="#6">Imports</a></h1>
<dl class="item">
<a class="reference external" href="strutils.html">strutils</a>, <a class="reference external" href="sequtils.html">sequtils</a>, <a class="reference external" href="tables.html">tables</a>, <a class="reference external" href="streams.html">streams</a>, <a class="reference external" href="endians.html">endians</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<dt id="TheType"><a name="TheType"></a><pre><span class="Identifier">TheType</span> <span class="Other">=</span> <span class="Keyword">object</span>
  </pre></dt>
<dd>
This type will be used as example to show which procedures will be generated by the <strong>serializable</strong> macro.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm/documentation.nim#L357"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm/documentation.nim#L357" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<dt id="size"><a name="size,typedesc[TheType]"></a><pre><span class="Keyword">proc</span> <span class="Identifier">size</span><span class="Other">(</span><span class="Identifier">thetype</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">TheType</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>
Returns the size of serialized type. The type should be placed under the <strong>static</strong> section inside the <strong>serializable</strong> macro to access this procedure. The procedure could be used at compile time.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm/documentation.nim#L360"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm/documentation.nim#L360" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="size"><a name="size,TheType"></a><pre><span class="Keyword">proc</span> <span class="Identifier">size</span><span class="Other">(</span><span class="Identifier">thetype</span><span class="Other">:</span> <span class="Identifier">TheType</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
Returns the size of serialized type. Available for types which declarations is not placed under the <strong>static</strong> section.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm/documentation.nim#L368"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm/documentation.nim#L368" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="serialize"><a name="serialize,TheType,Stream"></a><pre><span class="Keyword">proc</span> <span class="Identifier">serialize</span><span class="Other">(</span><span class="Identifier">obj</span><span class="Other">:</span> <span class="Identifier">TheType</span><span class="Other">;</span> <span class="Identifier">stream</span><span class="Other">:</span> <span class="Identifier">Stream</span><span class="Other">)</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
Serializes <cite>TheType</cite> and writes result to the given <cite>stream</cite>.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm/documentation.nim#L374"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm/documentation.nim#L374" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="serialize"><a name="serialize,TheType"></a><pre><span class="Keyword">proc</span> <span class="Identifier">serialize</span><span class="Other">(</span><span class="Identifier">obj</span><span class="Other">:</span> <span class="Identifier">TheType</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other pragmabegin">{.</span><div class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
Serializes <cite>TheType</cite> to string. Underlying implementation uses StringStream and <cite>serialize()</cite> procedure above. More detailed description can be found in the top level documentation.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm/documentation.nim#L379"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm/documentation.nim#L379" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="deserialize"><a name="deserialize,typedesc[TheType],Stream"></a><pre><span class="Keyword">proc</span> <span class="Identifier">deserialize</span><span class="Other">(</span><span class="Identifier">thetype</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">TheType</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">stream</span><span class="Other">:</span> <span class="Identifier">Stream</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">TheType</span> <span class="Other pragmabegin">{.</span><div class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Identifier">AssertionError</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
Interprets the data received from the <cite>stream</cite> as <cite>TheType</cite> and deserializes it then. When the stream will not provide enough bytes an <cite>AssertionError</cite> will be raised.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm/documentation.nim#L387"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm/documentation.nim#L387" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="deserialize"><a name="deserialize,typedesc[TheType],"></a><pre><span class="Keyword">proc</span> <span class="Identifier">deserialize</span><span class="Other">(</span><span class="Identifier">thetype</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">[</span><span class="Identifier">TheType</span><span class="Other">]</span><span class="Other">;</span>
                <span class="Identifier">data</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Operator">|</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">byte</span> <span class="Operator">|</span> <span class="Identifier">char</span> <span class="Operator">|</span> <span class="Identifier">int8</span> <span class="Operator">|</span> <span class="Identifier">uint8</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">TheType</span> <span class="Other pragmabegin">{.</span><div class="pragma">
    <span class="Identifier">raises</span><span class="Other">:</span> <span class="Identifier">AssertionError</span></div><span class="Other pragmaend">.}</span></pre></dt>
<dd>
Interprets given data as serialized <cite>TheType</cite> and deserializes it then. Only available for types which declarations are placed under the <strong>static</strong> section. When the <cite>data</cite> size is lesser than <cite>TheType.size</cite>, the AssertionError will be raised.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm/documentation.nim#L395"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm/documentation.nim#L395" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="serialize"><a name="serialize,T,Stream"></a><pre><span class="Keyword">proc</span> <span class="Identifier">serialize</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">obj</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">;</span> <span class="Identifier">thestream</span><span class="Other">:</span> <span class="Identifier">Stream</span><span class="Other">)</span></pre></dt>
<dd>
The non-intrusive serialize proc which allows to perform object serialization without special declaration. The negative side-effect of such approach is inability to pass any options (like <cite>endian</cite> or <cite>dynamic</cite>) to the serializer and lack of nested objects support. This proc should be imported directly.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm.nim#L91"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm.nim#L91" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="deserialize"><a name="deserialize,Stream"></a><pre><span class="Keyword">proc</span> <span class="Identifier">deserialize</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">thestream</span><span class="Other">:</span> <span class="Identifier">Stream</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
<dd>
The non-intrusive deserialize proc which allows to perform object deserialization without special declaration. The negative side-effect of such approach is inability to pass any options (like <cite>endian</cite> or <cite>dynamic</cite>) to the serializer and lack of nested objects support. This proc should be imported directly.
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm.nim#L99"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm.nim#L99" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>
<div class="section" id="17">
<h1><a class="toc-backref" href="#17">Macros</a></h1>
<dl class="item">
<dt id="toSerializable"><a name="toSerializable.m,typed,varargs[untyped]"></a><pre><span class="Keyword">macro</span> <span class="Identifier">toSerializable</span><span class="Other">(</span><span class="Identifier">typedecl</span><span class="Other">:</span> <span class="Identifier">typed</span><span class="Other">;</span> <span class="Identifier">settings</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">untyped</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>
<p>Generate [de]serialize procedures for existing type with given settings.</p>
<p>Settings should be supplied in the <strong>key: value, key:value</strong> format.</p>
<p>For example:</p>
<pre class="listing"><span class="Identifier">toSerializable</span><span class="Punctuation">(</span><span class="Identifier">TheType</span><span class="Punctuation">,</span> <span class="Identifier">endian</span><span class="Punctuation">:</span> <span class="Identifier">bigEndian</span><span class="Punctuation">,</span> <span class="Identifier">dynamic</span><span class="Punctuation">:</span> <span class="Identifier">false</span><span class="Punctuation">)</span></pre><p>Avalible options:</p>
<ul class="simple"><li><strong>endian</strong> - set the endian of serialized object</li>
<li><strong>dynamic</strong> - if set to 'false' then object treated as <strong>static</strong></li>
</ul>

&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm.nim#L107"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm.nim#L107" class="link-seesrc" target="_blank" >Edit</a>

</dd>
<dt id="serializable"><a name="serializable.m,untyped"></a><pre><span class="Keyword">macro</span> <span class="Identifier">serializable</span><span class="Other">(</span><span class="Identifier">typedecl</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>
<p>The main macro that generates code.</p>
<p>Usage:</p>
<pre class="listing"><span class="Identifier">serializable</span><span class="Punctuation">:</span>
  <span class="Comment"># Type declaration</span></pre>
&nbsp;&nbsp;<a
href="https://github.com/xomachine/NESM/tree/master/nesm.nim#L132"
class="link-seesrc" target="_blank">Source</a>
<a href="https://github.com/xomachine/NESM/edit/devel/nesm.nim#L132" class="link-seesrc" target="_blank" >Edit</a>

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small>Made with Nim. Generated: 2018-02-23 20:41:41 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
